<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JPOPJ - J-POP Community</title>
    <style>
        body { font-family: 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', sans-serif; margin: 0; background-color: #f4f4f4; }
        a { text-decoration: none; color: inherit; }
        .header { background-color: #fff; padding: 15px 30px; border-bottom: 1px solid #e0e0e0; display: flex; align-items: center; }
        .logo { font-weight: bold; font-size: 24px; color: #333; }
        .tag-nav { background-color: #fff; padding: 10px 30px; border-bottom: 1px solid #e0e0e0; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .tag-nav ul { margin: 0; padding: 0; list-style: none; display: flex; }
        .tag-nav li { margin-right: 25px; font-size: 16px; font-weight: 500; cursor: pointer; padding: 8px 4px; border-bottom: 3px solid transparent; transition: all 0.2s ease-in-out; }
        .tag-nav li a { display: block; } /* a íƒœê·¸ê°€ li ì˜ì—­ ì „ì²´ë¥¼ ì°¨ì§€í•˜ë„ë¡ */
        .tag-nav li:hover, .tag-nav li.active { color: #007bff; border-bottom: 3px solid #007bff; }
        .main-content { padding: 20px 30px; }
        .post-list-container { background-color: #fff; border-radius: 5px; padding: 20px; }
        .post-item { border-bottom: 1px solid #eee; padding: 15px 5px; }
        .post-item:last-child { border-bottom: none; }
        .post-title { font-size: 18px; font-weight: bold; color: #333; }
        .post-meta { font-size: 12px; color: #888; margin-top: 5px; }
        .no-post { padding: 40px; text-align: center; color: #777; }
        li{list-style: none;}
        /* ë§ˆì§€ë§‰ ë²„íŠ¼ë§Œ ì˜¤ë¥¸ìª½ ëì— ê³ ì •í•˜ë ¤ë©´ */
        .write-btn-container {
            margin-left: auto;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• */
        .write-btn {
            background-color: #4CAF50;  /* ì´ˆë¡ìƒ‰ ë°°ê²½ */
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .write-btn:hover {
            background-color: #45a049;  /* ë§ˆìš°ìŠ¤ ì˜¬ë ¸ì„ ë•Œ */
        }

        .profile-icon img {
            width: 36px;
            height: 36px;
            border-radius: 50%; /* ë™ê·¸ë—ê²Œ */
            object-fit: cover;
            vertical-align: middle;
        }

        /* ë¡œê·¸ì¸ ë²„íŠ¼ ì»¨í…Œì´ë„ˆ ì •ë ¬ (ì„ íƒ) */
        .login-btn-container {
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: auto; /* ìš°ì¸¡ ì •ë ¬ */
            padding: 0 10px;
        }

        /* ë¡œê·¸ì¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .login-btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #4a90e2;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        /* í˜¸ë²„ ì‹œ íš¨ê³¼ */
        .login-btn:hover {
            background-color: #357ab8;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

    </style>
</head>
<body>

<header class="header">
    <li class="logo"><a href="/">JPOPJ</a></li>
    <li class="login-btn-container">
        <a th:if="${session.user==null}" th:href="@{/login}" class="login-btn">ë¡œê·¸ì¸</a>

        <a th:if="${session.user != null}" th:href = "@{/profile}" class="profile-icon">
            <img src="/images/user-icon2.png" alt="ë‚´ ì •ë³´" width="33px"/>
        </a>
    </li>
</header>

<nav class="tag-nav">
    <ul>
        <li th:classappend="${activeCategory == 'NEW' ? 'active' : ''}"><a th:href="@{/NEW}">NEW</a></li>
        <li th:classappend="${activeCategory == 'ARTIST' ? 'active' : ''}"><a th:href="@{/ARTIST}">ARTIST</a></li>
        <li th:classappend="${activeCategory == 'REVIEW' ? 'active' : ''}"><a th:href="@{/REVIEW}">REVIEW</a></li>
        <li th:classappend="${activeCategory == 'TALK' ? 'active' : ''}"><a th:href="@{/TALK}">TALK</a></li>
        <li th:classappend="${activeCategory == 'CONCERT' ? 'active' : ''}"><a th:href="@{/CONCERT}">CONCERT</a></li>
        <li class="write-btn-container">
            <a th:href="@{/write}" class="write-btn">ê¸€ ì‘ì„±í•˜ê¸°</a>
        </li>
    </ul>
</nav>

<main class="main-content">
    <div id="post-list" class="post-list-container">

        <th:block th:if="${!posts.isEmpty()}">
            <div th:each="post : ${posts}" class="post-item">
                <div class="post-title">
                    <a th:href="@{'/posts/' + ${post.postId}}" th:text="${post.title}">ê²Œì‹œë¬¼ ì œëª©</a>
                </div>
                <div class="post-meta">
                    <span>ì‘ì„±ì: </span><span th:text="${post.userNickname}">ì‘ì„±ì</span> |
                    <span>ë‚ ì§œ: </span><span th:text="${post.date}">ë‚ ì§œ</span>
                </div>
            </div>
        </th:block>

        <div th:if="${posts.isEmpty()}" class="no-posts">
            <p>ì•„ì§ ê²Œì‹œë¬¼ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>

    </div>
</main>

</body>
</html>

<!-- Thymeleafì—ì„œ ${session.xxx} ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì´ìœ -->
<!--
ì•„ì£¼ ì¤‘ìš”í•œ ì§ˆë¬¸ì´ì—ìš”! ì •ë‹µë¶€í„° ë§í•˜ë©´:

âŒ ì•„ë‹ˆìš”. session ê°ì²´ëŠ” Modelì„ í†µí•´ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì•„ë‹™ë‹ˆë‹¤.
âœ… HttpSession ë˜ëŠ” Springì´ ìë™ìœ¼ë¡œ ë°”ì¸ë”©í•´ì£¼ëŠ” session ê°ì²´ë¥¼ í†µí•´ ì ‘ê·¼í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

âœ… ì •ë¦¬: Spring MVCì—ì„œ ì„¸ì…˜ ë°ì´í„°ëŠ” ì–´ë””ì„œ ì˜¤ëŠ”ê°€?
1. Thymeleafì—ì„œ ${session.xxx} ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì´ìœ 
ThymeleafëŠ” ì•„ë˜ì™€ ê°™ì€ ìŠ¤í”„ë§ ì œê³µ ê°ì²´ë“¤ì„ ìë™ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ í•´ì¤˜ìš”:

í‘œí˜„ì‹	ì˜ë¯¸
${session}	HttpSession ê°ì²´
${request}	HttpServletRequest
${param}	ìš”ì²­ íŒŒë¼ë¯¸í„°
${model}	Modelì— ë“¤ì–´ìˆëŠ” ê°’ë“¤

ì¦‰, ${session.user}ëŠ” HttpSession.getAttribute("user")ì— ì ‘ê·¼í•˜ëŠ” ê²ƒê³¼ ë˜‘ê°™ìŠµë‹ˆë‹¤.

ğŸ‘‰ ì´ëŠ” Modelì— ë„£ì§€ ì•Šì•„ë„ sessionì´ ìë™ìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

âœ… ì˜ˆì‹œ: ì„œë²„ ì¸¡ ì½”ë“œ
java
ë³µì‚¬
í¸ì§‘
@GetMapping("/profile")
public String profile(HttpSession session) {
    SessionUser user = (SessionUser) session.getAttribute("user");
    System.out.println(user.getName());
    return "profile";
}
or

java
ë³µì‚¬
í¸ì§‘
@GetMapping("/profile")
public String profile(@SessionAttribute("user") SessionUser user) {
    // ì„¸ì…˜ì— ì €ì¥ëœ user ìë™ ì£¼ì…
    return "profile";
}
âœ… ì˜ˆì‹œ: Thymeleafì—ì„œ í™•ì¸
html
ë³µì‚¬
í¸ì§‘
<span th:text="${session.user.name}">ì‚¬ìš©ì ì´ë¦„</span>
ì´ê±´ HttpSession.getAttribute("user") â†’ user.getName()ê³¼ ê°™ì€ ì˜ë¯¸ì˜ˆìš”.

âœ… ìš”ì•½
session ê°ì²´ëŠ” Modelê³¼ëŠ” ë³„ê°œì…ë‹ˆë‹¤.

sessionì€ HttpSessionì— ì €ì¥ëœ ì „ì—­ ê°’ë“¤ì„ ì˜ë¯¸í•˜ê³ ,

ThymeleafëŠ” Springì´ ìë™ìœ¼ë¡œ session, request ë“±ì„ contextì— ë“±ë¡í•´ì£¼ê¸° ë•Œë¬¸ì— ë°”ë¡œ ${session.xxx}ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Modelì€ ìš”ì²­ ì²˜ë¦¬ ì¤‘ ì„ì‹œë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ê³ , ì„¸ì…˜ì€ ì—¬ëŸ¬ ìš”ì²­ ê°„ ê³µìœ í•˜ëŠ” ì €ì¥ì†Œì…ë‹ˆë‹¤.

í•„ìš”í•˜ì‹œë©´ Model, ModelAndView, HttpSession, @SessionAttribute ê°„ ì°¨ì´ì ë„ í•œ ë²ˆì— ì •ë¦¬í•´ë“œë¦´ê²Œìš”!

-->